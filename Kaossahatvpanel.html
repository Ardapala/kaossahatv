<!--
Kaossahatvpanel - Single-file mobile-first IPTV reseller panel
How to use:
1) Save this file as Kaossahatvpanel.html
2) Upload to GitHub Pages (repo root) or to Netlify as a single site file
3) Open the page on your phone. Data is stored in browser localStorage under key: kaossahatv_accounts

Features:
- Fields: Username, Password, Duration (days/months), M3U Link
- Create account button
- Account list with: copy M3U, copy summary, delete
- Search & filter
- Export / Import JSON
- Responsive mobile-first design (dark/light toggle)

Note: This is a client-side-only manager. It does NOT actually create backend accounts on an IPTV server — you must either supply real working M3U links or use a panel that supports account creation. This tool lets you bind any M3U link to a username and store it locally.
--><!doctype html>

<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kaossahatvpanel</title>
  <style>
    :root{--bg:#0b0f14;--card:#0f1720;--muted:#9aa4b2;--accent:#22c1c3;--danger:#ff6b6b;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#e6eef6;background:linear-gradient(180deg,#020617 0%, #071225 100%);-webkit-font-smoothing:antialiased}
    header{padding:18px 16px;display:flex;gap:12px;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#2e86de);display:flex;align-items:center;justify-content:center;color:#021; font-weight:700}
    h1{font-size:16px;margin:0}
    p.lead{margin:0;font-size:12px;color:var(--muted)}
    main{padding:0 16px 80px}
    .card{background:var(--card);border-radius:12px;padding:12px;margin-bottom:12px;box-shadow:0 6px 18px rgba(0,0,0,0.45)}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:var(--glass);color:#e6eef6;font-size:14px}
    .row{display:flex;gap:8px}
    .row .col{flex:1}
    button{background:linear-gradient(90deg,var(--accent),#3ab0ff);border:none;padding:10px 12px;border-radius:10px;color:#021;font-weight:600;font-size:14px}
    .muted{color:var(--muted);font-size:13px}
    .list{margin-top:8px}
    .item{display:flex;flex-direction:column;padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));gap:8px}
    .meta{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .actions{display:flex;gap:8px}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.05);padding:8px;border-radius:8px;color:var(--muted);font-weight:600}
    .danger{background:var(--danger);color:white}
    .small{font-size:12px;padding:6px 8px}
    .searchbar{display:flex;gap:8px;margin-top:8px}
    .top-actions{display:flex;gap:8px;align-items:center}
    .note{font-size:12px;color:var(--muted);margin-top:6px}
    footer{position:fixed;left:0;right:0;bottom:0;padding:12px 16px;background:linear-gradient(180deg,transparent, rgba(0,0,0,0.5));}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    @media(min-width:720px){main{max-width:720px;margin:0 auto} .grid{grid-template-columns:1fr 1fr}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">K</div>
      <div>
        <h1>Kaossahatvpanel</h1>
        <p class="lead">Mobil uyumlu IPTV bayi paneli — tarayıcıda çalışır</p>
      </div>
    </div>
    <div class="top-actions">
      <button id="exportBtn" class="btn-ghost small">Export</button>
      <button id="importBtn" class="btn-ghost small">Import</button>
    </div>
  </header>  <main>
    <section class="card">
      <label for="username">Kullanıcı Adı</label>
      <input id="username" placeholder="ör: arda01" /><div style="height:8px"></div>
  <div class="row">
    <div class="col">
      <label for="password">Şifre</label>
      <input id="password" placeholder="ör: 1234" />
    </div>
    <div style="width:8px"></div>
    <div style="width:140px">
      <label for="duration">Süre</label>
      <select id="duration">
        <option value="7">7 Gün</option>
        <option value="30" selected>1 Ay</option>
        <option value="90">3 Ay</option>
        <option value="180">6 Ay</option>
        <option value="365">1 Yıl</option>
      </select>
    </div>
  </div>

  <div style="height:8px"></div>
  <label for="m3u">M3U Linki</label>
  <input id="m3u" placeholder="http://sunucu:8080/get.php?username=...&password=..." />

  <div style="height:12px"></div>
  <div style="display:flex;gap:8px">
    <button id="createBtn">Hesap Oluştur</button>
    <button id="clearBtn" class="btn-ghost">Temizle</button>
  </div>
  <p class="note">Not: Bu panel, verileri tarayıcıda saklar. Gerçek bir sunucuya hesap eklemek için sunucu panelini kullanmalısın.</p>
</section>

<section class="card">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <h3 style="margin:0;font-size:14px">Oluşturulan Hesaplar</h3>
    <input id="search" placeholder="Ara: kullanıcı, link..." style="width:55%" />
  </div>

  <div class="list" id="accountList"></div>
</section>

<section class="card">
  <h3 style="margin:0;font-size:14px">Hızlı İşlemler</h3>
  <div style="height:8px"></div>
  <div class="grid">
    <button id="copyAllBtn" class="btn-ghost">Tüm M3U'ları Kopyala</button>
    <button id="clearAllBtn" class="btn-ghost danger">Tümünü Sil</button>
  </div>
  <p class="note">Export ile JSON indirebilir, import ile daha önce export ettiğin dosyayı yükleyebilirsin.</p>
</section>

  </main>  <footer>
    <div style="display:flex;justify-content:space-between;gap:8px;align-items:center">
      <div class="muted">Kaossahatvpanel • Tarayıcıda çalışan basit bayi paneli</div>
      <div style="display:flex;gap:8px">
        <button id="helpBtn" class="btn-ghost small">Yardım</button>
      </div>
    </div>
  </footer>  <input type="file" id="fileInput" accept="application/json" style="display:none" />  <script>
    const STORAGE_KEY = 'kaossahatv_accounts_v1';

    function qs(id){return document.getElementById(id)}
    const username = qs('username'), password = qs('password'), duration = qs('duration'), m3u = qs('m3u');
    const createBtn = qs('createBtn'), clearBtn = qs('clearBtn'), accountList = qs('accountList');
    const search = qs('search'), exportBtn = qs('exportBtn'), importBtn = qs('importBtn');
    const fileInput = qs('fileInput'), copyAllBtn = qs('copyAllBtn'), clearAllBtn = qs('clearAllBtn'), helpBtn = qs('helpBtn');

    function nowISO(){ return new Date().toISOString(); }
    function load(){
      try{ const s = localStorage.getItem(STORAGE_KEY); return s? JSON.parse(s): []; }catch(e){return []}
    }
    function save(list){ localStorage.setItem(STORAGE_KEY, JSON.stringify(list)); }

    function render(filter=''){
      const list = load();
      accountList.innerHTML = '';
      const q = filter.trim().toLowerCase();
      if(!list.length){ accountList.innerHTML = '<div class="muted" style="padding:10px">Henüz hesap yok. Oluşturmak için formu kullan.</div>'; return }
      list.filter(it => {
        if(!q) return true;
        return (it.username||'').toLowerCase().includes(q) || (it.m3u||'').toLowerCase().includes(q) || (it.password||'').toLowerCase().includes(q);
      }).forEach((it, idx) => {
        const el = document.createElement('div'); el.className='item';
        const meta = document.createElement('div'); meta.className='meta';
        const left = document.createElement('div');
        left.innerHTML = `<div style="font-weight:700">${escapeHtml(it.username)} <span style='font-weight:500;color:var(--muted);font-size:12px'> / ${escapeHtml(it.password)}</span></div>
                          <div class='muted small'>Süre: ${it.durationLabel} • Oluşturma: ${new Date(it.created).toLocaleString()}</div>`;
        const right = document.createElement('div'); right.className='actions';

        const copyM3U = document.createElement('button'); copyM3U.className='btn-ghost small'; copyM3U.textContent='M3U Kopyala';
        copyM3U.onclick = ()=>{ copyToClipboard(it.m3u); showToast('M3U kopyalandı'); };

        const copySummary = document.createElement('button'); copySummary.className='btn-ghost small'; copySummary.textContent='Özet Kopyala';
        copySummary.onclick = ()=>{ copyToClipboard(accountSummary(it)); showToast('Hesap özeti kopyalandı'); };

        const del = document.createElement('button'); del.className='btn-ghost small danger'; del.textContent='Sil';
        del.onclick = ()=>{ if(confirm('Bu hesabı silmek istediğine emin misin?')){ removeAt(idx); } };

        right.appendChild(copyM3U); right.appendChild(copySummary); right.appendChild(del);
        meta.appendChild(left); meta.appendChild(right);
        el.appendChild(meta);

        const linkRow = document.createElement('div'); linkRow.className='muted small'; linkRow.textContent = it.m3u;
        el.appendChild(linkRow);

        accountList.appendChild(el);
      });
    }

    function escapeHtml(s){ if(!s) return ''; return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }
    function accountSummary(it){ return `Kullanıcı: ${it.username}\nŞifre: ${it.password}\nSüre (gün): ${it.duration}\nM3U: ${it.m3u}` }

    function addAccount(acc){ const list = load(); list.unshift(acc); save(list); render(search.value); }
    function removeAt(i){ const list = load(); list.splice(i,1); save(list); render(search.value); }
    function clearAll(){ if(confirm('Tüm hesapları silmek istediğine emin misin?')){ save([]); render(); } }

    function copyToClipboard(text){ navigator.clipboard?.writeText(text).catch(()=>{ fallbackCopy(text); }); }
    function fallbackCopy(text){ const ta = document.createElement('textarea'); ta.value=text; document.body.appendChild(ta); ta.select(); try{ document.execCommand('copy'); }catch{} ta.remove(); }

    function showToast(msg){ const t = document.createElement('div'); t.textContent=msg; t.style.position='fixed'; t.style.left='50%'; t.style.transform='translateX(-50%)'; t.style.bottom='110px'; t.style.background='rgba(0,0,0,0.7)'; t.style.color='white'; t.style.padding='10px 12px'; t.style.borderRadius='8px'; document.body.appendChild(t); setTimeout(()=>t.remove(),1500); }

    createBtn.onclick = ()=>{
      const u = username.value.trim(); const p = password.value.trim(); const m = m3u.value.trim(); const d = parseInt(duration.value,10);
      if(!u){ alert('Kullanıcı adı gerekli'); return }
      if(!m){ if(!confirm('M3U boş. Yine de oluşturulsun mu?')) return }
      const durLabel = d>=365? Math.floor(d/365)+' Yıl': (d>=30? Math.floor(d/30)+' Ay': d+' Gün');
      const acc = { username:u, password:p||'---', m3u:m||'', duration:d, durationLabel:durLabel, created: nowISO() };
      addAccount(acc);
      username.value=''; password.value=''; m3u.value=''; duration.value='30';
      showToast('Hesap oluşturuldu');
    };

    clearBtn.onclick = ()=>{ username.value=''; password.value=''; m3u.value=''; duration.value='30'; };

    search.oninput = ()=> render(search.value);

    exportBtn.onclick = ()=>{
      const list = load(); const blob = new Blob([JSON.stringify(list, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='kaossahatv_accounts.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    importBtn.onclick = ()=> fileInput.click();
    fileInput.onchange = (e)=>{
      const f = e.target.files[0]; if(!f) return; const r = new FileReader(); r.onload = ()=>{
        try{ const data = JSON.parse(r.result); if(Array.isArray(data)){ save(data); render(); showToast('Import başarılı'); } else alert('Geçersiz dosya'); }catch(err){ alert('Import sırasında hata') }
      }; r.readAsText(f);
    }

    copyAllBtn.onclick = ()=>{
      const list = load(); if(!list.length){ alert('Hesap yok'); return }
      const all = list.map(it => it.m3u).filter(Boolean).join('\n'); if(!all){ alert('Kopyalanacak M3U yok'); return }
      copyToClipboard(all); showToast('Tüm M3U bağlantıları kopyalandı');
    }

    clearAllBtn.onclick = ()=> clearAll();

    helpBtn.onclick = ()=> alert('Panel tarayıcıda çalışır. Gerçek sunucu tarafı işlemleri için Xtream/CairePro benzeri panele giriş yapmalısın. Burada oluşturduğun veriler tarayıcıda saklanır.');

    // Utilities for remove by index buttons referencing: we used splice based on filtered view, so provide safer removal via username
    function removeByUsername(u){ const list = load(); const idx = list.findIndex(x=>x.username===u); if(idx>=0){ list.splice(idx,1); save(list); render(search.value); }}

    // Initial render
    render();
  </script></body>
          </html>
